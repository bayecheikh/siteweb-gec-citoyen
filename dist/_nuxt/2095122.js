(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{527:function(e,t,r){e.exports=r.p+"img/file.5abdfb9.png"},538:function(e,t,r){var content=r(599);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(57).default)("1ac3321e",content,!0,{sourceMap:!1})},597:function(e,t,r){e.exports=r.p+"img/remove.109197c.png"},598:function(e,t,r){"use strict";r(538)},599:function(e,t,r){var o=r(56)((function(i){return i[1]}));o.push([e.i,".custom-textarea[data-v-0ef4c1a2]{border:1px solid #cecdcc!important;padding:20px 25px}.dotted[data-v-0ef4c1a2]{background-color:#fff;border:4px #cecdcc;border-style:none none dotted;color:#fff}.border-grey[data-v-0ef4c1a2]{border:2px solid #0a3764}.border-radio[data-v-0ef4c1a2]{padding:16px 10px 6px}.border-input[data-v-0ef4c1a2],.border-radio[data-v-0ef4c1a2]{border:1px solid #cecdcc!important}.border-input[data-v-0ef4c1a2]{border-radius:5px;cursor:pointer}.bg-fichier[data-v-0ef4c1a2]{background-color:#0a3764;border-radius:5px 0 0 5px;color:#fff}.imagePreviewWrapper[data-v-0ef4c1a2]{border:1px solid #eae9e9;cursor:pointer;padding:20px}.imagePreviewWrapper img[data-v-0ef4c1a2]{height:200px!important}.custom-input[data-v-0ef4c1a2],.custom-select[data-v-0ef4c1a2]{border:1px solid #cecdcc!important;height:50px!important}.custom-select[data-v-0ef4c1a2]{background-color:none!important;background:none!important}.form-group label[data-v-0ef4c1a2]{color:hsla(0,0%,9%,.761)!important;margin-bottom:8px}.custom-bloc-padding[data-v-0ef4c1a2]{padding:30px}.embeded-courrier[data-v-0ef4c1a2]{min-height:400px;width:100%}.bg-grey[data-v-0ef4c1a2]{background:#f7f5f2}.remove[data-v-0ef4c1a2]{cursor:pointer}",""]),o.locals={},e.exports=o},644:function(e,t,r){"use strict";r.r(t);r(69),r(41),r(12),r(43),r(36),r(34),r(49),r(35),r(50);var o,l=r(19),n=r(3),c=(r(16),r(28),r(29),r(284),r(66));function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function m(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(l.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f,v={components:{SectionTitle:function(){return r.e(0).then(r.bind(null,640))}},computed:Object(c.b)({detailutilisateur:"coordonnees/detailutilisateur",detailministere:"ministeres/detailministere",detailcontenu:"contenus/detailcontenu"}),mounted:(f=Object(n.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$axios.get("/model-courriers");case 3:t=e.sent,this.modelContenu=t.data.data.data,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return");case 11:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return f.apply(this,arguments)}),data:function(){return{selectedEntree:"Secrétariat administratif",fileInfos:[{name:"file 1",url:"#"},{name:"file 2",url:"#"}],key:null,imageData:null,title_courrier:"",extFile:"",saisie:!1,attache_courrier:!0,modelContenu:[{id:1,libelle:"Plainte",text:"Lorum ipsum dolor Lorum ipsum dolor Lorum ipsum dolor Lorum ipsum dolor"},{id:2,libelle:"Demande",text:"Message message"},{id:3,libelle:"Opinion",text:"Lorum ipsum dolor Lorum ipsum dolor"}],modelEntree:[{id:1,libelle:"Secrétariat administratif",text:"Lorum ipsum dolor Lorum ipsum dolor Lorum ipsum dolor Lorum ipsum dolor",default:!0},{id:2,libelle:"Secrétariat DC",text:"Message message"},{id:3,libelle:"Secrétariat particulier",text:"Lorum ipsum dolor Lorum ipsum dolor"}],model:{type_contenu:"attache_courrier",encodedFile:"",pieces_jointes:[],modelId:1,entree:"",format:"",subject:"",message:"",doctype:102,status:"COU",destination:1}}},methods:(o={submitContenu:function(){this.load=!0,console.log("Données formulaire ++++++: ",m({},this.model)),this.$store.dispatch("contenus/getDetail",m(m({},this.model),{},{entree:this.selectedEntree,subject:this.model.subject})),this.$store.dispatch("active_step/getDetail",{id:"validation"})},changeModel:function(e){var t;console.log("Données formulaire ++++++: ",e.target.value);var r=null===(t=this.modelContenu)||void 0===t?void 0:t.filter((function(t){return t._id==e.target.value}))[0];this.$refs.message.value=(null==r?void 0:r.message)||"",this.model.message=(null==r?void 0:r.message)||"",this.$refs.subject.value=(null==r?void 0:r.objet)||"",this.model.subject=(null==r?void 0:r.objet)||"",this.model.modelId=parseInt(e.target.value)},changeModelEntree:function(e){console.log("Données formulaire ++++++: ",e.target.value),this.model.entree=e.target.value},changeType:function(e){console.log("Données formulaire ++++++: ",e.target.value),"saisie_libre"==e.target.value&&(this.saisie=!0,this.attache_courrier=!1,this.model.message=""),"attache_courrier"==e.target.value&&(this.saisie=!1,this.attache_courrier=!0)},selectImage:function(){this.$refs.fileInput.click()}},Object(l.a)(o,"selectImage",(function(){this.$refs.file.click()})),Object(l.a)(o,"handleFileUpload",(function(e){var t=this,r=this.$refs.file.files,o=r[0].name,title=o.substring(0,o.lastIndexOf("."))||o;this.title_courrier=title;var l=o.lastIndexOf(".")+1,n=o.substr(l,o.length).toLowerCase();this.model.format=n;var c=r[0].size/1024/1024;if(console.log("Size -------------- ",c),c<=5&&"pdf"==n){if(r&&r[0]){var d=new FileReader;d.onload=function(e){t.imageData=e.target.result,t.model.encodedFile=d.result.split(";base64,")[1],t.$store.dispatch("contenus/getDetail",m(m({},t.detailcontenu),{},{encodedFile:d.result.split(";base64,")[1],format:n})),console.log(d.result.split(";base64,")[1])},d.readAsDataURL(r[0]),this.$emit("input",r[0])}}else alert("Seules les fichiers pdf et de taille inférieure à 5Mb sont acceptées!")})),Object(l.a)(o,"handleFileUpload2",(function(e){var t=this;if(console.log(this.model.pieces_jointes.length),this.model.pieces_jointes.length<=2){var r=this.$refs.file2.files,o=r[0].name,title=o.substring(0,o.lastIndexOf("."))||o,l=o.lastIndexOf(".")+1,n=o.substr(l,o.length).toLowerCase(),c=r[0].size/1024/1024;if(console.log("Size -------------- ",c),c<=5&&"pdf"==n){if(r&&r[0]){var d=new FileReader;d.onload=function(e){t.model.pieces_jointes.push({title:title,format:n,encodedFile:d.result.split(";base64,")[1],taille:c}),console.log(t.model.pieces_jointes)},d.readAsDataURL(r[0]),this.$emit("input",r[0])}}else alert("Seules les fichiers pdf et de taille inférieure à 5Mb sont acceptées!")}else alert("Le nombre maximum de pièces-jointes est déja atteint")})),Object(l.a)(o,"deleteFindFichier",(function(e){console.log("Index---- ",e),this.model.pieces_jointes.splice(e,1)})),o)},h=v,_=(r(598),r(18)),component=Object(_.a)(h,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"custom-bloc-padding"},[t("h3",{staticClass:"title"}),e._v(" "),t("form",{staticClass:"row"},[t("div",{staticClass:"edu-sorting form-group col-12"},[t("label",{attrs:{for:"reg-name"}},[e._v("Choisir une entrée")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedEntree,expression:"selectedEntree"}],staticClass:"custom-select",on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.selectedEntree=t.target.multiple?r:r[0]},function(t){return e.changeModelEntree(t)}]}},e._l(e.modelEntree,(function(r){return t("option",{key:r.id,domProps:{value:r.libelle}},[e._v(e._s(r.libelle))])})),0)]),e._v(" "),e.saisie?t("div",{staticClass:"edu-sorting form-group col-12"},[t("label",{attrs:{for:"reg-name"}},[e._v("Choisir un model")]),e._v(" "),t("select",{staticClass:"custom-select",on:{change:function(t){return e.changeModel(t)}}},[t("option",[e._v("--")]),e._v(" "),e._l(e.modelContenu,(function(r){return t("option",{key:r._id,domProps:{value:r._id}},[e._v(e._s(r.name))])}))],2)]):e._e(),e._v(" "),t("div",{staticClass:"form-group col-12"},[t("label",{attrs:{for:"reg-name"}},[e._v("Objet*")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.model.subject,expression:"model.subject"}],ref:"subject",staticClass:"custom-input",attrs:{type:"text",name:"reg-name",id:"reg-name",placeholder:"Sujet du courrier"},domProps:{value:e.model.subject},on:{input:function(t){t.target.composing||e.$set(e.model,"subject",t.target.value)}}})]),e._v(" "),e.saisie?t("div",{staticClass:"form-group col-12 mt-4"},[t("label",{attrs:{for:"reg-name"}},[e._v("Message*")]),e._v(" "),t("textarea",{ref:"message",staticClass:"custom-textarea",attrs:{cols:"30",rows:"4",name:"reg-name",placeholder:"Votre courrier*","v-model":e.model.message,required:""}})]):e._e(),e._v(" "),e.attache_courrier?t("div",{staticClass:"col-12 form-group"},[t("label",{attrs:{for:"reg-name"}},[e._v("Joindre le courrier (Format PDF) :")]),e._v(" "),t("div",{staticClass:"d-flex justify-content-between border-input",on:{click:function(t){return e.$refs.file.click()}}},[t("p",{staticClass:"mb-0 bg-fichier p-3"},[e._v("Choisir un fichier")]),e._v(" "),t("div",{staticClass:"p-3"},[t("svg",{staticClass:"bi bi-upload",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[t("path",{attrs:{d:"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"}}),e._v(" "),t("path",{attrs:{d:"M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"}})])])]),e._v(" "),t("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",id:"file",name:"avatar"},on:{change:e.handleFileUpload}})]):e._e(),e._v(" "),e.attache_courrier&&e.imageData?t("div",{staticClass:"col-12 form-group"},[t("div",{staticClass:"imagePreviewWrapper col-12 border-input mb-3",on:{click:e.selectImage}},["jpg"==e.model.format||"png"==e.model.format?t("img",{attrs:{src:e.imageData}}):e._e(),e._v(" "),"pdf"==e.model.format||"docx"==e.model.format||"doc"==e.model.format?t("embed",{staticClass:"embeded-courrier",attrs:{src:e.imageData+"#toolbar=0"}}):e._e()])]):e._e(),e._v(" "),t("div",{staticClass:"col-12 my-5"},[t("div",{staticClass:"card"},[t("div",{staticClass:"card-header"},[e._v("Ajouter des pièces jointes (Format PDF)")]),e._v(" "),t("ul",{staticClass:"list-group list-group-flush"},[e._l(e.model.pieces_jointes,(function(o,l){return t("li",{key:l,staticClass:"list-group-item d-flex justify-content-between"},[t("span",[t("img",{attrs:{src:r(527),width:"50"}}),e._v("\n                    "+e._s(o.title))]),e._v(" "),t("span",[e._v(e._s(o.size))]),e._v(" "),t("span",{on:{click:function(t){return e.deleteFindFichier(e.i)}}},[t("img",{staticClass:"remove",attrs:{src:r(597),width:"50"}})])])})),e._v(" "),t("li",{staticClass:"list-group-item"},[t("div",{staticClass:"d-flex justify-content-center border-input bg-grey",on:{click:function(t){return e.$refs.file2.click()}}},[t("div",{staticClass:"p-3"},[t("svg",{staticClass:"bi bi-upload",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[t("path",{attrs:{d:"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"}}),e._v(" "),t("path",{attrs:{d:"M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"}})])])]),e._v(" "),t("input",{ref:"file2",staticStyle:{display:"none"},attrs:{type:"file",id:"file2",name:"avatar"},on:{change:e.handleFileUpload2}})])],2)])]),e._v(" "),e._m(0),e._v(" "),t("div",{staticClass:"row d-flex justify-content-between"},[t("div",{staticClass:"form-group col-3 mt-5"},[t("button",{staticClass:"edu-btn btn-medium",attrs:{type:"button"},on:{click:function(t){return e.$goToTab("ministeres")}}},[t("i",{staticClass:"icon-west"}),e._v(" Précédent")])]),e._v(" "),t("div",{staticClass:"form-group col-3 mt-5"},[t("button",{staticClass:"edu-btn btn-medium",attrs:{type:"button"},on:{click:e.submitContenu}},[e._v("Suivant "),t("i",{staticClass:"icon-east"})])])])])])}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"form-group col-12 chekbox-area"},[t("div",{staticClass:"edu-form-check"},[t("input",{attrs:{type:"checkbox",id:"terms-condition"}}),e._v(" "),t("label",{attrs:{for:"terms-condition"}},[e._v("J'accepte les termes et conditions "),t("a",{attrs:{href:"terms-condition.html"}},[e._v("Terms & Condition.")])])])])}],!1,null,"0ef4c1a2",null);t.default=component.exports}}]);