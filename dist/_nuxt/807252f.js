(window.webpackJsonp=window.webpackJsonp||[]).push([[33,18],{524:function(e,t,r){"use strict";var n=r(0),o=r(279);n({target:"String",proto:!0,forced:r(280)("link")},{link:function(e){return o(this,"a","href",e)}})},631:function(e,t,r){"use strict";r.r(t);r(34),r(41),r(49),r(35),r(50);function n(source,e){if(null==source)return{};var t,i,r=function(source,e){if(null==source)return{};var t,i,r={},n=Object.keys(source);for(i=0;i<n.length;i++)t=n[i],e.indexOf(t)>=0||(r[t]=source[t]);return r}(source,e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(source);for(i=0;i<n.length;i++)t=n[i],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(source,t)&&(r[t]=source[t])}return r}var o=r(19),c=r(3),l=(r(16),r(36),r(92),r(12),r(44),r(28),r(29),r(283),r(23),r(60),r(66)),h=["code"];function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function f(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var O,m={modules:["@nuxtjs/axios"],axios:{baseURL:"https://api-gec-citoyen.fly.dev"},mounted:(O=Object(c.a)(regeneratorRuntime.mark((function e(){var t,r,o,c,l,d,O;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.isauthenticatingfrombutton,console.log("CODE+++++++++++++++",this.$route.query),!this.$route.query.code){e.next=47;break}return this.model={code:this.$route.query.code,authorisation:"Basic ZWNvbW11bmU6ZWNvbW11bmU=",urlClient:"https://siteweb-gec-citoyen.vercel.app",urlPns:"https://pprodofficial.service-public.bj/api/official/token"},e.prev=4,e.next=7,this.$axios.post("users/code",f({},this.model));case 7:return r=e.sent,console.log("NEW RESPONSE",r),e.next=11,localStorage.setItem("NEWRESPONSE",JSON.stringify(r));case 11:return console.log("TOKEN PNS RESPONSE",JSON.parse(localStorage.getItem("NEWRESPONSE"))),window.location.href="https://siteweb-gec-citoyen.vercel.app/",e.next=15,localStorage.setItem("gecToken",r.data.id_token.id_token);case 15:return e.next=17,localStorage.setItem("gecLoggedInUser",JSON.stringify(this.parseJwt(r.data.id_token.id_token)));case 17:return e.next=19,localStorage.setItem("gecIdUser",r.data.data.doc._id);case 19:return e.next=21,localStorage.setItem("gecIsAuthenticated",!0);case 21:if(o=JSON.parse(localStorage.getItem("gecLoggedInUser")),c=localStorage.getItem("gecIdUser"),console.log("GEC LOGGED IN USER",o),console.log("GEC ID USER",c),!t){e.next=29;break}this.$router.push("/addcourrier"),e.next=34;break;case 29:return(l=this.$route.query).code,d=n(l,h),O="".concat(this.$route.path,"?").concat(new URLSearchParams(d).toString()),e.next=33,this.$router.replace(O);case 33:this.$router.push("/");case 34:this.$store.dispatch("authentication/getDetailIsLoggedIn",!0),this.$store.dispatch("toast/getMessage",{type:"success",text:"Connexion réussie !"}),this.$store.dispatch("coordonnees/getDetail",{dataUser:this.parseJwt(r.id_token)}),this.$store.dispatch("active_step/getDetail",{id:"coordonnees"}),this.$store.dispatch("authentication/getDetailIsAuthenticatingFromButton",!1),e.next=47;break;case 41:return e.prev=41,e.t0=e.catch(4),console.error(e.t0),console.log("Code error ++++++: ",e.t0),this.$store.dispatch("toast/getMessage",{type:"error",text:e.t0||"Échec de la connexion"}),e.abrupt("return");case 47:case"end":return e.stop()}}),e,this,[[4,41]])}))),function(){return O.apply(this,arguments)}),components:{HeaderTwo:function(){return Promise.resolve().then(r.bind(null,552))},Banner:function(){return r.e(22).then(r.bind(null,651))},Categories:function(){return r.e(23).then(r.bind(null,652))},HomeKitchenCoachFAQ:function(){return r.e(24).then(r.bind(null,653))},FooterKitchen:function(){return Promise.resolve().then(r.bind(null,525))}},computed:Object(l.b)({detailactive_step:"active_step/detailactive_step",isauthenticatingfrombutton:"authentication/isauthenticatingfrombutton"}),head:function(){return{title:"GEC CITOYEN"}},data:function(){return{}},methods:{parseJwt:function(e){if(e){var t=e.split(".")[1].replace("-","+").replace("_","/");return JSON.parse(window.atob(t))}}}},v=m,w=r(18),component=Object(w.a)(v,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"main-wrapper bg-lighten05",attrs:{id:"main-wrapper"}},[t("HeaderTwo"),e._v(" "),t("Banner"),e._v(" "),t("Categories"),e._v(" "),t("HomeKitchenCoachFAQ"),e._v(" "),t("FooterKitchen")],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{HeaderTwo:r(552).default,FooterKitchen:r(525).default})}}]);